#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Identify & Kill the GitIssuefy process running on port 3000
echo "ğŸ›‘ Stopping any process running on port 3000..."
npx kill-port 3000

echo 'ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”... Alright.... Trying to build now. ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”'

# Attempt to build
npm run build || (
    echo 'âŒğŸ‘·ğŸ”¨âŒ Better call Bob... Because your build failed âŒğŸ‘·ğŸ”¨âŒ
            Next build failed: View the errors above to see why. 
    '
    false;
)

echo 'âœ…âœ…âœ…âœ… Everything Good... Committing now. âœ…âœ…âœ…âœ…'

# Restart the dev server
echo "ğŸ”„ Restarting the npm run dev server..."
npm run dev &